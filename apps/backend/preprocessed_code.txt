axes = Axes(
    x_range=[0, 5],
    y_range=[0, 25],
    axis_config={"include_tip": False},
)
self.play(Create(axes))

function = lambda x: x**2
graph = axes.plot(function, color=BLUE)
self.play(Create(graph))

title = Text("Riemann Sums").scale(0.8).to_edge(UP)
self.play(Write(title))

explanation = Text("Riemann sums help us estimate\nthe area under a curve").scale(0.6).next_to(title, DOWN)
self.play(Write(explanation))

self.wait(2)

self.play(FadeOut(explanation))

rectangles = VGroup()
n_rectangles = 5
dx = 5 / n_rectangles

for i in range(n_rectangles):
    x = i * dx
    y = function(x)
    rect = Rectangle(
        width=dx,
        height=y,
        fill_opacity=0.5,
        fill_color=RED,
        stroke_color=WHITE
    ).next_to(axes.c2p(x, 0), UP, buff=0)
    rectangles.add(rect)

self.play(Create(rectangles))

sum_text = Text("Sum of rectangle areas\napproximates area under curve").scale(0.6).next_to(title, DOWN)
self.play(Write(sum_text))

self.wait(2)

self.play(FadeOut(sum_text))

more_rectangles = VGroup()
n_more_rectangles = 20
dx_more = 5 / n_more_rectangles

for i in range(n_more_rectangles):
    x = i * dx_more
    y = function(x)
    rect = Rectangle(
        width=dx_more,
        height=y,
        fill_opacity=0.5,
        fill_color=GREEN,
        stroke_color=WHITE
    ).next_to(axes.c2p(x, 0), UP, buff=0)
    more_rectangles.add(rect)

self.play(Transform(rectangles, more_rectangles))

final_text = Text("More rectangles = Better approximation").scale(0.6).next_to(title, DOWN)
self.play(Write(final_text))

self.wait(2)